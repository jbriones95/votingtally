<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Littleton Colorado Restaurants by Cuisine</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Littleton Colorado Restaurants by Cuisine</h1>
    <div id="cuisines"></div>
  </div>
  <script>
    // Example data: 5 cuisines, each with 2-3 restaurants
    const restaurantsByCuisine = {
      "American": [
        { name: "Manning's Steaks & Spirits", address: "111 S. Broadway" },
        { name: "Farm House Restaurant at Breckenridge Brewery", address: "2990 Brewery Ln" },
        { name: "Grande Station", address: "2299 W Main St" }
      ],
      "Italian": [
        { name: "Angelo's Taverna - Littleton", address: "6885 S Santa Fe Dr" },
        { name: "Cafe Terracotta", address: "5649 S Curtice St" }
      ],
      "Seafood": [
        { name: "Smokin Fins - Littleton", address: "2575 W Main St" }
      ],
      "Asian": [
        { name: "Ninja Sushi", address: "7301 S Santa Fe Dr" }
      ],
      "Bar & Grill": [
        { name: "ViewHouse", address: "2680 W Main St" }
      ]
    };

    // Store votes in-memory (per session, not persistent)
    const votes = {};

    function escapeHtml(s = '') {
      return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
    }

    function getVoteKey(cuisine, idx) {
      return cuisine + '-' + idx;
    }

    function renderCuisines() {
      const cuisinesEl = document.getElementById('cuisines');
      cuisinesEl.innerHTML = Object.entries(restaurantsByCuisine).map(([cuisine, list]) => `
        <section class="cuisine-section">
          <div class="cuisine-title">${escapeHtml(cuisine)}</div>
          <div class="restaurant-grid">
            ${list.map((r, idx) => {
              const key = getVoteKey(cuisine, idx);
              const up = votes[key]?.up || 0;
              const down = votes[key]?.down || 0;
              return `
                <div class="card">
                  <div class="restaurant-name">${escapeHtml(r.name)}</div>
                  <div class="restaurant-address">${escapeHtml(r.address)}</div>
                  <div class="vote-row">
                    <button class="vote-btn agree" onclick="vote('${key}', 'up')" title="Thumbs up">&#128077;</button>
                    <span class="vote-count">${up}</span>
                    <button class="vote-btn disagree" onclick="vote('${key}', 'down')" title="Thumbs down">&#128078;</button>
                    <span class="vote-count">${down}</span>
                  </div>
                </div>
              `;
            }).join('')}
          </div>
        </section>
      `).join('');
    }

    // Voting logic (in-memory, per session)
    window.vote = function(key, type) {
      votes[key] = votes[key] || { up: 0, down: 0 };
      if (type === 'up') votes[key].up++;
      if (type === 'down') votes[key].down++;
      renderCuisines();
    };

    renderCuisines();
  </script>
</body>
</html>